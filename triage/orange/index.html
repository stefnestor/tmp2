<!-- https://github.com/squidfunk/mkdocs-material/discussions/6185 -->

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://stefnestor.github.io/tmp2/triage/orange/">
      
      
        <link rel="prev" href="../green/">
      
      
        <link rel="next" href="../red/">
      
      
      <link rel="icon" href="../../assets/elastic.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
    <title>Triage</title>

    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="" class="md-header__button md-logo" aria-label="" data-md-component="logo">
      
  <img src="../../assets/elastic.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Orange
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/stefnestor/tmp2/docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    stefnestor/tmp2
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  üè°

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  Triage

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="" class="md-nav__button md-logo" aria-label="" data-md-component="logo">
      
  <img src="../../assets/elastic.png" alt="logo">

    </a>
    
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/stefnestor/tmp2/docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    stefnestor/tmp2
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    üè°
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Triage
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Triage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../green/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Green
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Orange
    
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../red/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Red
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../yellow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Yellow
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
	<!-- https://stackoverflow.com/questions/5559578/having-links-relative-to-root -->
	<div id="triage_img_wrapper">
		<img src="/tmp2/assets/bg.png" alt="bg" id="bg" class="imgBg">
		<a href="/tmp2/triage/red">
			<img src="/tmp2/assets/red.png" alt="red" id="red" class="imgBg">
		</a>
		<a href="/tmp2/triage/orange">
			<img src="/tmp2/assets/orange.png" alt="orange" id="orange" class="imgBg">
		</a>
		<a href="/tmp2/triage/yellow">
			<img src="/tmp2/assets/yellow.png" alt="yellow" id="yellow" class="imgBg">
		</a>
	</div>
    <div class="admonition abstract">
<p class="admonition-title">summary</p>
<p>Resource utilization appears nominal throughout, only fluctuating with daily traffic volume.</p>
<div class="admonition quote">
<p>(Opt) Both Elasticsearch and Kibana's Proxy Log response times suggest no significant change in overall traffic nor response times for the last month. However, there are now low volume Kibana <code>bsearch</code> requests taking +5s. Elasticsearch <em>maybe</em> has time-correlative <code>_msearch</code> spikes but it's hard to guarantee if those are related.</p>
</div>
<details class="quote">
<summary>nominal utilization</summary>
<div class="admonition example">
<p class="admonition-title">CAT alternatives</p>
<p>The Elasticsearch API pages for CAT ("compact and aligned text") prefix with warning</p>
<blockquote>
<p>‚ö†Ô∏è CAT APIs are only intended for human consumption using the command line or Kibana console. They are not intended for use by applications. For application consumption, use ...</p>
</blockquote>
<p>For mapping to backing JSON-response API's, see <a href="https://medium.com/@stefnestor/elasticsearch-cat-alternatives-315f72ea6d5e">Elasticsearch CAT Alternatives</a>. </p>
<p>Note that since Elasticsearch diagnostics are not stateful (aka they pull API's in quick succession but do not capture the singular state of all of the the databases' APIs all at once), then results between CAT APIs and sister JSON-response APIs will not be exact.</p>
</div>
<p>CAT Nodes (<a href="https://www.elastic.co/docs/api/doc/elasticsearch/v8/operation/operation-cat-nodes">v8</a>, <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.16/cat-nodes.html">v7</a>) would appear</p>
<div class="highlight"><pre><span></span><code>GET _cat/nodes?v&amp;h=n,nodeId,i,v,role,m,d,dup,hp,cpu,load_1m,load_5m,load_15m,iic,sfc,sqc,scc&amp;s=n
</code></pre></div>
<p>which stores into Elasticsearch diagnostic under <code>./cat/cat_nodes.txt</code> (<a href="https://github.com/elastic/support-diagnostics/blob/main/src/main/resources/elastic-rest.yml#L71-L76">ref</a>) and returned with</p>
<div class="highlight"><pre><span></span><code>n                     nodeId i            v      role   m      d  dup hp cpu load_1m load_5m load_15m iic sfc sqc scc
tiebreaker-0000000002 e6Cw   10.42.10.175 7.16.1 mv     - 44.9gb 0.00 55   0    1.98    1.60     1.28   0   0   0   0
instance-0000000000   fjnZ   10.42.0.53   7.16.1 himrst * 89.8gb 0.18 33   0    1.04    1.31     1.17   0   0   0   0
instance-0000000001   VcYo   10.42.13.38  7.16.1 himrst - 89.8gb 0.19 20   2    0.95    1.45     1.66   0   0   0   0
</code></pre></div>
<div class="admonition example">
<p>CAT Nodes compiles from 
  Node Info (<a href="https://www.elastic.co/docs/api/doc/elasticsearch/v8/operation/operation-nodes-info">v8</a>, <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.16/cluster-nodes-info.html">v7</a>, <a href="https://github.com/elastic/support-diagnostics/blob/main/src/main/resources/elastic-rest.yml#L259-L263">ref</a>)
, Cluster State (<a href="https://www.elastic.co/docs/api/doc/elasticsearch/v8/operation/operation-cluster-state">v8</a>, <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.16/cluster-state.html">v7</a>, <a href="https://github.com/elastic/support-diagnostics/blob/main/src/main/resources/elastic-rest.yml#L183-L186">ref</a>)
, and Node Stats (<a href="https://www.elastic.co/docs/api/doc/elasticsearch/v8/operation/operation-nodes-stats">v8</a>, <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.16/cluster-nodes-stats.html">v7</a>, <a href="https://github.com/elastic/support-diagnostics/blob/main/src/main/resources/elastic-rest.yml#L269-L273">ref</a>).</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>jq<span class="w"> </span>-rc<span class="w"> </span><span class="s1">&#39;.nodes|input.master_node as $master|input.nodes as $ns|to_entries[]|{id:.key, ip:.value.ip, host:.value.host, name:.value.name, roles:.value.roles, is_master:(if .key == $master then true else false end), disk_avail:$ns[.key].fs.total.free, heap_percent:$ns[.key].jvm.mem.heap_used_percent, cpu:$ns[.key].os.cpu.percent, loads:$ns[.key].os.cpu.load_average}&#39;</span><span class="w"> </span>nodes.json<span class="w"> </span>cluster_state.json<span class="w"> </span>nodes_stats.json
</code></pre></div>
<p>which emits</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;e6CwioOYT2mpLkUaugPLaQ&quot;</span><span class="p">,</span><span class="nt">&quot;ip&quot;</span><span class="p">:</span><span class="s2">&quot;10.42.10.175&quot;</span><span class="p">,</span><span class="nt">&quot;host&quot;</span><span class="p">:</span><span class="s2">&quot;10.42.10.175&quot;</span><span class="p">,</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;tiebreaker-0000000002&quot;</span><span class="p">,</span><span class="nt">&quot;roles&quot;</span><span class="p">:[</span><span class="s2">&quot;master&quot;</span><span class="p">,</span><span class="s2">&quot;voting_only&quot;</span><span class="p">],</span><span class="nt">&quot;is_master&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nt">&quot;disk_avail&quot;</span><span class="p">:</span><span class="s2">&quot;44.9gb&quot;</span><span class="p">,</span><span class="nt">&quot;heap_percent&quot;</span><span class="p">:</span><span class="mi">55</span><span class="p">,</span><span class="nt">&quot;cpu&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&quot;loads&quot;</span><span class="p">:{</span><span class="nt">&quot;15m&quot;</span><span class="p">:</span><span class="mf">1.28</span><span class="p">,</span><span class="nt">&quot;1m&quot;</span><span class="p">:</span><span class="mf">1.98</span><span class="p">,</span><span class="nt">&quot;5m&quot;</span><span class="p">:</span><span class="mf">1.60</span><span class="p">}}</span>
<span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;fjnZjXPbTWa7jRsNY5YggA&quot;</span><span class="p">,</span><span class="nt">&quot;ip&quot;</span><span class="p">:</span><span class="s2">&quot;10.42.0.53&quot;</span><span class="p">,</span><span class="nt">&quot;host&quot;</span><span class="p">:</span><span class="s2">&quot;10.42.0.53&quot;</span><span class="p">,</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;instance-0000000000&quot;</span><span class="p">,</span><span class="nt">&quot;roles&quot;</span><span class="p">:[</span><span class="s2">&quot;data_content&quot;</span><span class="p">,</span><span class="s2">&quot;data_hot&quot;</span><span class="p">,</span><span class="s2">&quot;ingest&quot;</span><span class="p">,</span><span class="s2">&quot;master&quot;</span><span class="p">,</span><span class="s2">&quot;remote_cluster_client&quot;</span><span class="p">,</span><span class="s2">&quot;transform&quot;</span><span class="p">],</span><span class="nt">&quot;is_master&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nt">&quot;disk_avail&quot;</span><span class="p">:</span><span class="s2">&quot;89.8gb&quot;</span><span class="p">,</span><span class="nt">&quot;heap_percent&quot;</span><span class="p">:</span><span class="mi">33</span><span class="p">,</span><span class="nt">&quot;cpu&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&quot;loads&quot;</span><span class="p">:{</span><span class="nt">&quot;15m&quot;</span><span class="p">:</span><span class="mf">1.17</span><span class="p">,</span><span class="nt">&quot;1m&quot;</span><span class="p">:</span><span class="mf">1.04</span><span class="p">,</span><span class="nt">&quot;5m&quot;</span><span class="p">:</span><span class="mf">0.31</span><span class="p">}}</span>
<span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;VcYoXNv5T92qsQRyN7hIhA&quot;</span><span class="p">,</span><span class="nt">&quot;ip&quot;</span><span class="p">:</span><span class="s2">&quot;10.42.13.38&quot;</span><span class="p">,</span><span class="nt">&quot;host&quot;</span><span class="p">:</span><span class="s2">&quot;10.42.13.38&quot;</span><span class="p">,</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;instance-0000000001&quot;</span><span class="p">,</span><span class="nt">&quot;roles&quot;</span><span class="p">:[</span><span class="s2">&quot;data_content&quot;</span><span class="p">,</span><span class="s2">&quot;data_hot&quot;</span><span class="p">,</span><span class="s2">&quot;ingest&quot;</span><span class="p">,</span><span class="s2">&quot;master&quot;</span><span class="p">,</span><span class="s2">&quot;remote_cluster_client&quot;</span><span class="p">,</span><span class="s2">&quot;transform&quot;</span><span class="p">],</span><span class="nt">&quot;is_master&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nt">&quot;disk_avail&quot;</span><span class="p">:</span><span class="s2">&quot;89.8gb&quot;</span><span class="p">,</span><span class="nt">&quot;heap_percent&quot;</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span><span class="nt">&quot;cpu&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="nt">&quot;loads&quot;</span><span class="p">:{</span><span class="nt">&quot;15m&quot;</span><span class="p">:</span><span class="mf">1.66</span><span class="p">,</span><span class="nt">&quot;1m&quot;</span><span class="p">:</span><span class="mf">0.95</span><span class="p">,</span><span class="nt">&quot;5m&quot;</span><span class="p">:</span><span class="mf">1.45</span><span class="p">}}</span>
</code></pre></div>
</div>
<p>This emits some disk statistics, but to expand further use CAT Allocation (<a href="https://www.elastic.co/docs/api/doc/elasticsearch/v8/operation/operation-cat-allocation">v8</a>, <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.16/cat-allocation.html">v7</a>) would appear</p>
<div class="highlight"><pre><span></span><code><span class="err">GET</span><span class="w"> </span><span class="err">_ca</span><span class="kc">t</span><span class="err">/alloca</span><span class="kc">t</span><span class="err">io</span><span class="kc">n</span><span class="err">?v</span>
</code></pre></div>
<p>which stores into Elasticsearch diagnostic under <code>./cat/cat_allocation.json</code> (<a href="https://github.com/elastic/support-diagnostics/blob/main/src/main/resources/elastic-rest.yml#L26-L30">ref</a>) and returned with </p>
<div class="highlight"><pre><span></span><code>shards disk.indices disk.used disk.avail disk.total disk.percent host        ip          node
    17       89.5mb   175.3mb     89.8gb       90gb            0 10.42.13.38 10.42.13.38 instance-0000000001
    17       88.4mb   168.7mb     89.8gb       90gb            0 10.42.0.53  10.42.0.53  instance-0000000000
</code></pre></div>
<div class="admonition example">
<p>CAT Allocation compiles from Node Stats (<a href="https://www.elastic.co/docs/api/doc/elasticsearch/v8/operation/operation-nodes-stats">v8</a>, <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.16/cluster-nodes-stats.html">v7</a>, <a href="https://github.com/elastic/support-diagnostics/blob/main/src/main/resources/elastic-rest.yml#L269-L273">ref</a>).</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cat<span class="w"> </span>nodes_stats.json<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>-rc<span class="w"> </span><span class="s1">&#39;.nodes[]|{shards:.indices.shard_stats.total_count,disk_indices:.indices.store.size,disk_avail:.fs.total.free, disk_avail_bytes: .fs.total.free_in_bytes, disk_total:.fs.total.total, disk_total_bytes: .fs.total.total_in_bytes, host:.host, ip:.ip, node:.name}|.+{disk_used_bytes: (.disk_total_bytes-.disk_avail_bytes)}|.+{disk_percent: (.disk_used_bytes/.disk_total_bytes|round)}&#39;</span>
</code></pre></div>
<p>which emits</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="nt">&quot;shards&quot;</span><span class="p">:</span><span class="mi">17</span><span class="p">,</span><span class="nt">&quot;disk_indices&quot;</span><span class="p">:</span><span class="s2">&quot;89.5mb&quot;</span><span class="p">,</span><span class="nt">&quot;disk_avail&quot;</span><span class="p">:</span><span class="s2">&quot;89.8gb&quot;</span><span class="p">,</span><span class="nt">&quot;disk_avail_bytes&quot;</span><span class="p">:</span><span class="mi">96452792320</span><span class="p">,</span><span class="nt">&quot;disk_total&quot;</span><span class="p">:</span><span class="s2">&quot;90gb&quot;</span><span class="p">,</span><span class="nt">&quot;disk_total_bytes&quot;</span><span class="p">:</span><span class="mi">96636764160</span><span class="p">,</span><span class="nt">&quot;host&quot;</span><span class="p">:</span><span class="s2">&quot;10.42.13.38&quot;</span><span class="p">,</span><span class="nt">&quot;ip&quot;</span><span class="p">:</span><span class="s2">&quot;10.42.13.38:19778&quot;</span><span class="p">,</span><span class="nt">&quot;node&quot;</span><span class="p">:</span><span class="s2">&quot;instance-0000000001&quot;</span><span class="p">,</span><span class="nt">&quot;disk_used_bytes&quot;</span><span class="p">:</span><span class="mi">183971840</span><span class="p">,</span><span class="nt">&quot;disk_percent&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span><span class="w">           </span>
<span class="p">{</span><span class="nt">&quot;shards&quot;</span><span class="p">:</span><span class="mi">17</span><span class="p">,</span><span class="nt">&quot;disk_indices&quot;</span><span class="p">:</span><span class="s2">&quot;88.4mb&quot;</span><span class="p">,</span><span class="nt">&quot;disk_avail&quot;</span><span class="p">:</span><span class="s2">&quot;89.8gb&quot;</span><span class="p">,</span><span class="nt">&quot;disk_avail_bytes&quot;</span><span class="p">:</span><span class="mi">96459583488</span><span class="p">,</span><span class="nt">&quot;disk_total&quot;</span><span class="p">:</span><span class="s2">&quot;90gb&quot;</span><span class="p">,</span><span class="nt">&quot;disk_total_bytes&quot;</span><span class="p">:</span><span class="mi">96636764160</span><span class="p">,</span><span class="nt">&quot;host&quot;</span><span class="p">:</span><span class="s2">&quot;10.42.0.53&quot;</span><span class="p">,</span><span class="nt">&quot;ip&quot;</span><span class="p">:</span><span class="s2">&quot;10.42.0.53:19058&quot;</span><span class="p">,</span><span class="nt">&quot;node&quot;</span><span class="p">:</span><span class="s2">&quot;instance-0000000000&quot;</span><span class="p">,</span><span class="nt">&quot;disk_used_bytes&quot;</span><span class="p">:</span><span class="mi">177180672</span><span class="p">,</span><span class="nt">&quot;disk_percent&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>
<span class="p">{</span><span class="nt">&quot;shards&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&quot;disk_indices&quot;</span><span class="p">:</span><span class="s2">&quot;0b&quot;</span><span class="p">,</span><span class="nt">&quot;disk_avail&quot;</span><span class="p">:</span><span class="s2">&quot;44.9gb&quot;</span><span class="p">,</span><span class="nt">&quot;disk_avail_bytes&quot;</span><span class="p">:</span><span class="mi">48317509632</span><span class="p">,</span><span class="nt">&quot;disk_total&quot;</span><span class="p">:</span><span class="s2">&quot;45gb&quot;</span><span class="p">,</span><span class="nt">&quot;disk_total_bytes&quot;</span><span class="p">:</span><span class="mi">48318382080</span><span class="p">,</span><span class="nt">&quot;host&quot;</span><span class="p">:</span><span class="s2">&quot;10.42.10.175&quot;</span><span class="p">,</span><span class="nt">&quot;ip&quot;</span><span class="p">:</span><span class="s2">&quot;10.42.10.175:19881&quot;</span><span class="p">,</span><span class="nt">&quot;node&quot;</span><span class="p">:</span><span class="s2">&quot;tiebreaker-0000000002&quot;</span><span class="p">,</span><span class="nt">&quot;disk_used_bytes&quot;</span><span class="p">:</span><span class="mi">872448</span><span class="p">,</span><span class="nt">&quot;disk_percent&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>
</code></pre></div>
<p>This did include <code>tiebreaker-0000000002</code> which does not normally host data as the CAT Allocation API filters to <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html">data nodes</a>. </p>
</div>
</details>
<p>üöß Suspected but never caught Node Hot Threads showing problem BUT when reproducing IF find then include <a href="https://github.com/elastic/support/tree/master/agentTools/streamlit">threads streamlit parser</a>.</p>
</div>
    <br />
    <br />
    <br />

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../stylesheets/extra.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>